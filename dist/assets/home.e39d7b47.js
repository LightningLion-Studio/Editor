import{G as w,N as A}from"./index.95954865.js";import{d as G,a as L,u as M,r as f,o as U,c as b,b as $,e as a,w as n,F as x,f as O,g as u,h as _,i,t as C,j as T,k as z,l as v,m as H}from"./index.7d66d416.js";const J=G("counter",{state:()=>({count:"/",history:["/"]}),actions:{push(s){const t=s.substring(0,1);console.log(t),t!="/"&&(s="/"+s),this.count!="/"?this.count=this.count+s:this.count=s,this.history.push(this.count),console.log(this.history)},back(){const s=this.history[this.history.length-2];delete this.history[this.history.length-1],this.count=this.history[s],console.log(this.history)}},persist:{enabled:!0,storage:localStorage}}),K={class:"home"},P=L({__name:"home",setup(s){const t=J(),d=O();M();const r=f([]),e=f(!0);document.querySelector("#app");const m=async l=>await w(l),F=async l=>{if(l[12].type=="folder"){e.value=!0,t.count,t.push(l[0]);const c=await m(t.count);if(c.status==!1){t.back(),e.value=!1;return}r.value=c.data.DIR,e.value=!1}else e.value=!0,d.push({path:"/edit",query:{path:t.count+"/"+l[0]}}),e.value=!1},p=f(!1),h=f(""),B=async()=>{e.value=!0,await A(t.count+"/"+h.value);const l=await m(t.count);r.value=l.data.DIR,p.value=!1,e.value=!1};return U(async()=>{e.value=!0;let l=await w(t.count);r.value=l.data.DIR,e.value=!1}),(l,c)=>{const E=u("n-h1"),q=u("n-text"),y=u("n-button"),g=u("n-space"),k=u("n-tag"),D=u("n-thing"),N=u("n-list-item"),S=u("n-list"),I=u("n-spin"),R=u("n-input"),V=u("n-modal");return _(),b(x,null,[$("div",K,[a(E,{class:"h1 margin"},{default:n(()=>[i("\u6587\u4EF6")]),_:1}),a(q,{class:"margin"},{default:n(()=>[i(C(T(t).count),1)]),_:1}),a(g,{class:"margin"},{default:n(()=>[a(y,{onClick:c[0]||(c[0]=o=>p.value=!0),type:"primary"},{default:n(()=>[i(" \u65B0\u5EFA\u6587\u4EF6 ")]),_:1})]),_:1}),a(I,{show:e.value},{default:n(()=>[a(S,{class:"margin",hoverable:"",clickable:""},{default:n(()=>[(_(!0),b(x,null,z(r.value,(o,j)=>(_(),v(N,{key:j,onClick:W=>F(o)},{default:n(()=>[a(D,{title:o[0],"title-extra":o[3],description:o[10]},{default:n(()=>[o[12].type==="folder"?(_(),v(k,{key:0},{default:n(()=>[i(" \u6587\u4EF6\u5939 ")]),_:1})):o[12].type==="file"?(_(),v(k,{key:1},{default:n(()=>[i(C(o[12].ext)+" \u6587\u4EF6 ",1)]),_:2},1024)):H("",!0)]),_:2},1032,["title","title-extra","description"])]),_:2},1032,["onClick"]))),128))]),_:1})]),_:1},8,["show"])]),a(V,{show:p.value,"onUpdate:show":c[2]||(c[2]=o=>p.value=o),preset:"dialog",title:"\u8BF7\u8F93\u5165\u540D\u5B57"},{default:n(()=>[a(g,{class:"padding",vertical:"",justify:"center"},{default:n(()=>[a(R,{value:h.value,"onUpdate:value":c[1]||(c[1]=o=>h.value=o)},null,8,["value"]),a(y,{onClick:B,block:"",type:"primary",loading:e.value},{default:n(()=>[i("\u786E\u5B9A")]),_:1},8,["loading"])]),_:1})]),_:1},8,["show"])],64)}}});const Q=(s,t)=>{const d=s.__vccOpts||s;for(const[r,e]of t)d[r]=e;return d},Z=Q(P,[["__scopeId","data-v-e7861d58"]]);export{Z as default};
